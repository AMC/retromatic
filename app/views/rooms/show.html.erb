<%= turbo_stream_from @room %>


<section class='title'>
  <section id='icons'>

    <%= button_to room_reaction_path(@room), method: :post, params: {reaction: :like} do %>
      <span class="fa-stack fa-2x">
        <i class="fas fa-square fa-stack-2x"></i>
        <i class="fas fa-angry fa-inverse fa-stack-1x"></i>
        <span class="fa-layers-counter fa-layers-bottom-right fa-2x">
          <%= @room.likes || 0 %>
        </span>
      </span>
    <% end %>

    <%= button_to room_reaction_path(@room), method: :post, params: {reaction: :meh} do %>
      <span class="fa-stack fa-2x">
        <i class="fas fa-square fa-stack-2x"></i>
        <i class="fas fa-meh fa-inverse fa-stack-1x"></i>
        <span class="fa-layers-counter fa-layers-bottom-right fa-2x">
          <%= @room.mehs || 0 %>
        </span>
      </span>
    <% end %>

    <%= button_to room_reaction_path(@room), method: :post, params: {reaction: :dislike} do %>
      <span class="fa-stack fa-2x">
        <i class="fas fa-square fa-stack-2x"></i>
        <i class="fas fa-grin fa-inverse fa-stack-1x"></i>
        <span class="fa-layers-counter fa-layers-bottom-right fa-2x">
          <%= @room.dislikes || 0 %>
        </span>
      </span>
    <% end %>

  </section>

  <h1> <%= @room.name %></h1>
</section>

<div class='cols-3'>
  <% @room.topics.each do |topic| %>
    <div class='topic'>
      <h2> <%= topic.name %></h2>

      <%= turbo_frame_tag "new_message", src: new_room_topic_message_path(@room, topic), target: "_top" %>

      <div id="<%= topic.snakecase %>">
        <%= render topic.messages %>
      </div>


    </div>

  <% end %>
</div>